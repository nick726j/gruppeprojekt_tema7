<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="noindex" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Familjen+Grotesk:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet" />
    <title>Anna</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="produkt.css" />
    <style>
      .data-container {
        display: grid;
        gap: 10px;
      }

      .article {
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        height: 338px;
        padding: 10px;
        background-color: white;
        border: solid 1px black;
        filter: drop-shadow(5px 5px black);
      }

      .picture {
        max-width: 100%;
        object-fit: cover;
        max-height: 338px;
      }

      @media screen and (min-width: 1080px) {
        .data-container {
          grid-template-columns: repeat(4, 1fr);
        }
      }
    </style>
  </head>
  <body>
    <header id="header-nav">
      <nav>
        <div class="wrapper">
          <div class="col">
            <ul class="nav-shop">
              <li><a href="produktside-placeholder.html">SHOP</a></li>
              <li><a href="side3.html">OM OS</a></li>
              <li><a href="side4.html">KONTAKT</a></li>
            </ul>
            <ul class="nav-login">
              <li><a href="#">SÃ˜G</a></li>
              <li><a href="#">LOGIN</a></li>
              <li><a href="#">LOVE</a></li>
              <li><a href="#">KURV</a></li>
            </ul>
          </div>
        </div>
      </nav>
    </header>

    <main>
      <div class="first">
        <h1>Anna</h1>
        <img src="IMG/anna_lp.jpg" alt="anna" class="produkt-billede" />

        <nav class="nav">
          <button class="filterKnap valgt" data-Type="alle">Alle</button>
          <button class="filterKnap" data-Type="Bukser">Bukser</button>
          <button class="filterKnap" data-Type="Jakke">Jakker</button>
          <button class="filterKnap" data-Type="Bluse">Bluser</button>
          <button class="filterKnap" data-Type="Sko">Sko</button>
        </nav>
      </div>
      <section id="popup">
        <article class="article">
          <img class="picture" src="" alt="" />
          <div id="luk"></div>
          <p class="type"></p>
          <h2 class="maerke"></h2>
          <p class="stoerrelse"></p>
          <div class="dots"></div>
          <p class="farve"></p>
          <p class="dot_space">...</p>
          <p class="pris"></p>
        </article>
      </section>
      <article id="liste">
        <section class="data-container"></section>
        <template>
          <section class="article" id="menu">
            <article class="col-1"><img class="picture" src="" alt="" /></article>
            <article class="col-2">
              <h2 class="maerke"></h2>
              <ul>
                <li>
                  <p class="type"></p>
                </li>
                <li>
                  <p class="stoerrelse"></p>
                </li>
                <li>
                  <p class="farve"></p>
                </li>
              </ul>
              <p class="pris"></p>
            </article>
          </section>
        </template>
      </article>
    </main>
    <script>
      const fil = "https://thriftllama-f2e6.restdb.io/rest/kollektion";
      const mereInfo = {
        headers: {
          "x-apikey": "6320629ffdc15b0265f1738a",
        },
      };

      document.addEventListener("DOMContentLoaded", start);
      let filter = "alle";
      let json;

      function start() {
        const filterKnapper = document.querySelectorAll("nav button");
        filterKnapper.forEach((knap) => knap.addEventListener("click", filtrerRetter));
        hentData();
      }

      function filtrerRetter() {
        filter = this.dataset.type;
        document.querySelector(".valgt").classList.remove("valgt");
        this.classList.add("valgt");
        vis(json);
      }

      async function hentData(fil) {
        const result = await fetch(fil, mereInfo);
        json = await result.json();
        console.log(json);
        vis(json);
      }
      function vis(json) {
        const container = document.querySelector(".data-container");
        const retTemplate = document.querySelector("template");
        container.textContent = "";
        json.forEach((toj) => {
          if (toj.ejer == "Anna") {
            if (filter == toj.type || filter == "alle") {
              const klon = retTemplate.cloneNode(true).content;
              klon.querySelector(".type").textContent = toj.type;
              klon.querySelector(".maerke").textContent = toj.maerke;
              klon.querySelector(".stoerrelse").textContent = toj.stoerrelse;
              klon.querySelector(".picture").src = "produktbilleder/" + toj.billednavn;
              klon.querySelector(".picture").alt = toj.billednavn;
              klon.querySelector(".farve").textContent = toj.farve;
              klon.querySelector(".pris").textContent = toj.pris + " kr";
              klon.querySelector(".article").addEventListener("click", () => visDetaljer(toj));
              container.appendChild(klon);
            }
          }
        });
      }

      function visDetaljer(toj) {
        popup.style.display = "flex";
        popup.querySelector(".type").textContent = toj.type;
        popup.querySelector(".maerke").textContent = toj.maerke;
        popup.querySelector(".stoerrelse").textContent = toj.stoerrelse;
        popup.querySelector(".picture").src = "produktbilleder/" + toj.billednavn;
        popup.querySelector(".picture").alt = toj.billednavn;
        popup.querySelector(".farve").textContent = toj.farve;
        popup.querySelector(".pris").textContent = toj.pris + " kr";
      }

      document.querySelector("#luk").addEventListener("click", () => (popup.style.display = "none"));

      hentData(fil);
    </script>
  </body>
</html>
